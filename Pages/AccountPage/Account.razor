@page "/account"
@layout AdminLayout
@inherits AccountBase

<MudGrid Justify="Justify.Center">
    <MudText Class="mt-20" Style="color: white" Typo="Typo.h3">Manage Account</MudText>

    <MudItem Class="ms-20 mt-5 col-lg-12 row g-2 justify-content-center">
        <MudPaper Class="col-lg-4 me-6 mb-6" Elevation="5" Style="height: 700px; width: 100%; max-width: 400px">
            <MudContainer Class="text-center mt-4">
                <MudText Typo="Typo.h6">Create Admin Account</MudText>
            </MudContainer>

            <MudContainer Class="px-4 mt-4">
                <MudForm @ref="form" Validated="OnValidated">
                    <MudTextField T="string" Label="Name" @bind-Value="admin.Name" Required="true" />

                    <MudSelect T="string" Label="Gender" @bind-Value="admin.Gender" Required="true">
                        <MudSelectItem Value="@("Male")">Male</MudSelectItem>
                        <MudSelectItem Value="@("Female")">Female</MudSelectItem>
                        <MudSelectItem Value="@("Other")">Other</MudSelectItem>
                    </MudSelect>

                    <MudTextField T="string" Label="Age" @bind-Value="admin.Age" Pattern="^\d*$" MaxLength="3" Required="true" />

                    <MudTextField T="string" Label="Email" @bind-Value="admin.Email" Required="true" />

                    <MudTextField T="string" Label="Password" @bind-Value="admin.Password" InputType="InputType.Password" Required="true" />

                    <MudButton Class="mt-15" Style="height: 50px; background-color: cornflowerblue" Variant="Variant.Filled" Disabled="@isLoading" OnClick="RegisterOnClick" >
                        Register
                    </MudButton>
                </MudForm>
            </MudContainer>
        </MudPaper>

        <MudPaper Class="col-lg-8" Elevation="5" Style="height: 700px; width: 700px">
            <MudContainer>
                <MudText Typo="Typo.h6" Class="text-center mt-4">Additional Account Management</MudText>
                <MudTable Items="Admins" Striped="true" Hover="true" Bordered="true" Class="mt-4">
                    <HeaderContent>
                        <MudTh>Name</MudTh>
                        <MudTh>Gender</MudTh>
                        <MudTh>Age</MudTh>
                        <MudTh>Email</MudTh>
                        <MudTh>Password</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Name">@context.Name</MudTd>
                        <MudTd DataLabel="Gender">@context.Gender</MudTd>
                        <MudTd DataLabel="Age">@context.Age</MudTd>
                        <MudTd DataLabel="Email">@context.Email</MudTd>
                        <MudTd DataLabel="Password">@context.Password</MudTd>
                        <MudTd>
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="() => RemoveAccount(context.AdminId)" />
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </MudContainer>
        </MudPaper>
    </MudItem>
</MudGrid>
